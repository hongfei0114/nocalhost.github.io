<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Nocalhost Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Nocalhost Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Nocalhost" href="/opensearch.xml">
<link rel="icon" href="/img/favicon.ico">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"><title data-react-helmet="true">Blog | Nocalhost</title><meta data-react-helmet="true" property="og:title" content="Blog | Nocalhost"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="description" content="Blog"><meta data-react-helmet="true" property="og:description" content="Blog"><meta data-react-helmet="true" property="og:url" content="https://nocalhost.dev//blog"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://nocalhost.dev//blog"><link data-react-helmet="true" rel="alternate" href="https://nocalhost.dev//blog" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://nocalhost.dev//zh-CN/blog" hreflang="zh-CN"><link data-react-helmet="true" rel="alternate" href="https://nocalhost.dev//blog" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.13031db7.css">
<link rel="preload" href="/assets/js/runtime~main.bd545d41.js" as="script">
<link rel="preload" href="/assets/js/main.45631e64.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><div class="announcementBar_3WsW" role="banner"><div class="announcementBarPlaceholder_2m9F"></div><div class="announcementBarContent_3EUC">⭐️ If you like Nocalhost, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/nocalhost/nocalhost">GitHub</a>! ⭐</div><button type="button" class="clean-btn close announcementBarClose_38nx" aria-label="Close"><svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor"><path d="M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z"></path></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Most productive cloud-native development toolsets" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.png" alt="Most productive cloud-native development toolsets" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Nocalhost</b></a><a class="navbar__item navbar__link" href="/docs/introduction">Docs</a><a class="navbar__item navbar__link" href="/videos">Videos</a><a class="navbar__item navbar__link" href="/tools">Tools</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_3vod"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/blog" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li><a href="/zh-CN/blog" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">中文（中国）</a></li></ul></div><a href="https://github.com/nocalhost/nocalhost" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-list-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">All our posts</div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/0.5.6">Announcing Nocalhost v0.5.6</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/api-six">Developing APISIX Ingress Controller with Nocalhost in Kubernetes</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/docs-translate">Nocalhost 官方文档翻译活动</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2021/07/05/jimmy">How to debug microservices in Kubernetes with proxy, sidecar or service mesh?</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2021/01/01/">Redefine Cloud Native Dev Environment</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/blog/0.5.6">Announcing Nocalhost v0.5.6</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-11-01T14:59:49.632Z" itemprop="datePublished">November 1, 2021</time> · 2 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/anurnomeru" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://avatars.githubusercontent.com/u/24870621?v=4" alt="Anur"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/anurnomeru" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Anur</span></a></div><small class="avatar__subtitle" itemprop="description">Backend engineer at Nocalhost Team</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>Nocalhost v0.5.6 has been released, we&#x27;ve fixed some bugs, improved the performance and add some new features. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="whats-new"></a>What&#x27;s new?<a class="hash-link" href="#whats-new" title="Direct link to heading">#</a></h2><p>We recently shipped four major improvements:</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="supports-nodejs-remote-rundebug-and-hotreload-in-jetbrains"></a>Supports Node.js remote Run/Debug and HotReload in JetBrains<a class="hash-link" href="#supports-nodejs-remote-rundebug-and-hotreload-in-jetbrains" title="Direct link to heading">#</a></h3><p>Nocalhost now supports remote run/debug/HotReload of Node.js in JetBrains.</p><p><a href="/docs/guides/debug/remote-debug">Learn more about how to configure Remote Debug of Node.js</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="supports-hotreload-in-jetbrains"></a>Supports HotReload in JetBrains<a class="hash-link" href="#supports-hotreload-in-jetbrains" title="Direct link to heading">#</a></h3><p>Nocalhost now supports HotReload when doing remote run/debug in JetBrains. When enabled this feature, Nocalhost will monitor real-time file changes and automatically re-execute the preset Run/debug commands without manually operation during the development or remote debugging.</p><iframe width="100%" height="600" src="//player.bilibili.com/player.html?aid=335688273&amp;bvid=BV1sR4y1p7RM&amp;cid=415232002&amp;page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe><p><a href="/docs/guides/hot-reload">Learn more about how to configure HotReload</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="major-update-for-nocalhost-server"></a>Major update for Nocalhost Server<a class="hash-link" href="#major-update-for-nocalhost-server" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="new-ui"></a>New UI<a class="hash-link" href="#new-ui" title="Direct link to heading">#</a></h4><p>We&#x27;ve build a new Server Dashboard UI.</p><figure class="img-frame"><img class="gif-img" src="/img/server/dashboard.gif"></figure><p><a href="/docs/server/deploy-server">Try our new Nocalhost Sever</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="meshspace"></a>MeshSpace<a class="hash-link" href="#meshspace" title="Direct link to heading">#</a></h4><p><strong>MeshSpace</strong> is based on <a href="https://istio.io/" target="_blank" rel="noopener noreferrer">Istio</a>, allows you to share workloads by specifying header with independent routing.</p><figure class="img-frame"><img class="gif-img" src="/img/server/mesh-space.svg"></figure><p><a href="/docs/server/manage-devspace-mesh">Learn more about MeshSpace</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="supports-to-share-kubernetes-namespace"></a>Supports to share Kubernetes namespace<a class="hash-link" href="#supports-to-share-kubernetes-namespace" title="Direct link to heading">#</a></h4><p>You can easily share your Kubernetes namespace with anyone within your team by using Nocalhost Server. </p><figure class="img-frame"><img class="gif-img" src="/img/server/share.svg"></figure><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="supports-to-store-nocalhost-configuration-in-kubernetes-cluster"></a>Supports to store Nocalhost configuration in Kubernetes cluster<a class="hash-link" href="#supports-to-store-nocalhost-configuration-in-kubernetes-cluster" title="Direct link to heading">#</a></h3><p>You can now easily share your Nocalhost Configuration with anyone who is using the same Kubernetes cluster.</p><figure class="img-frame"><img class="gif-img" src="/img/config/share-config.png"></figure><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="other-updates"></a>Other Updates<a class="hash-link" href="#other-updates" title="Direct link to heading">#</a></h2><p><a href="/docs/changelogs/0.5.x#056-2021-09-16">Read the full changelogs of Nocalhost v0.5.6</a></p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/announcement">Announcement</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/blog/api-six">Developing APISIX Ingress Controller with Nocalhost in Kubernetes</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-11-01T14:59:49.632Z" itemprop="datePublished">November 1, 2021</time> · 7 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/neaped" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://avatars.githubusercontent.com/u/3713305?v=4" alt="Garry Chen"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/neaped" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Garry Chen</span></a></div><small class="avatar__subtitle" itemprop="description">Product Manager at Nocalhost Team</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><figure class="img-frame"><img class="gif-img" src="/img/blog/apisix/apisix-banner.png"></figure><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="introduction"></a>Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">#</a></h2><p>This article walks you through using Nocalhost to seamlessly connect your local development machine to a remote Kubernetes cluster, allowing you to use your favourite IDE to develop and debug <a href="https://apisix.apache.org/docs/ingress-controller/getting-started" target="_blank" rel="noopener noreferrer">Apache APISIX ingress controller</a>. Giving you the ability to comfortably develop and debug your remote apps with your existing skills.</p><p>This article covers:</p><ol><li><a href="#deploy-apisix-ingress-controller">Deploy the APISIX Ingress controller</a> to the remote Kubernetes cluster within IDE</li><li><a href="#developing">Developing</a> and <a href="#debugging">debugging</a> APISIX ingress controller in Kubernetes without image rebuilding</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="prerequisites"></a>Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">#</a></h2><ul><li>Prepare an available Kubernetes cluster in your workstation. You can use any Kubernetes clusters that you have namespace admin privilege.</li><li><a href="https://helm.sh" target="_blank" rel="noopener noreferrer">Helm v3.0+</a> installed.</li><li>GoLand IDE 2020.03+ (I am using GoLand 2021.2 in this article)</li><li><a href="/docs/installation#install-jetbrains-plugin">Install Nocalhost JetBrains plugin</a></li><li>Install <a href="https://golang.org/dl/" target="_blank" rel="noopener noreferrer">Go 1.13</a> or later</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="deploy-apisix-ingress-controller"></a>Deploy APISIX Ingress Controller<a class="hash-link" href="#deploy-apisix-ingress-controller" title="Direct link to heading">#</a></h2><p>I&#x27;m going to deploy APISIX Ingress Controller by Nocalhost within GoLand: </p><ol><li>Open the Nocalhost plugin within GoLand</li><li>Use the cluster inspector to select the namespace that you want to deploy.</li><li>Right-click the selected namespace, choose <strong><code>Deploy Application</code></strong>, and select <strong><code>Helm Repo</code></strong> as installation method. </li><li>In the following dialog box, input<ul><li><code>apisix-ingress-controller</code> as <code>Name</code></li><li><code>https://charts.apiseven.com</code> as <code>Chart URL</code></li></ul></li></ol><figure class="img-frame"><img class="gif-img" src="/img/blog/apisix/apisix-ingress-deploy.gif"><figcaption>Deploy APISIX ingress controller</figcaption></figure><p>Let&#x27;s test the <code>apisix-ingress-controller</code> after deployment by enable the port-forwarding within IDE:</p><ol><li>Find the <code>apisix-ingress-controller</code> workload in the cluster inspector, right-click and select the <strong><code>Port Forward</code></strong></li><li>Add the port-forwarding <code>8080:8080</code></li><li>Visiting the <a href="http://127.0.0.1:8080/healthz" target="_blank" rel="noopener noreferrer"><code>http://127.0.0.1:8080/healthz</code></a> in local and check the result</li></ol><figure class="img-frame"><img class="gif-img" src="/img/blog/apisix/apisix-ingress-test.gif"><figcaption>Test the deployment</figcaption></figure><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="developing"></a>Developing<a class="hash-link" href="#developing" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="step-1-add-nocalhost-configuration"></a>Step 1. Add Nocalhost configuration<a class="hash-link" href="#step-1-add-nocalhost-configuration" title="Direct link to heading">#</a></h3><p>Before we start to develop, we need to add the Nocalhost configuration.</p><ol><li>Right-click the <code>apisix-ingress-controller</code> in Nocalhost&#x27;s cluster inspector and select <strong><code>Dev Config</code></strong> </li><li>Copy and paste the following Nocalhost configuration to the file just opened. Remember to save it.</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apisix</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ingress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">controller</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">serviceType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> deployment</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apisix</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ingress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">controller</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">dev</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">gitUrl</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/apache/apisix</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ingress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">controller.git</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> codingcorp</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">docker.pkg.coding.net/nocalhost/dev</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">images/golang</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1.16</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">shell</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">workDir</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /home/nocalhost</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">dev</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null important">null</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">portForward</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 8080</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">8080</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="what-did-i-configure"></a>What did I configure?<a class="hash-link" href="#what-did-i-configure" title="Direct link to heading">#</a></h4><ul><li>We deployed a development workload called <code>apisix-ingress-controller</code></li><li>When starting development mode, Nocalhost will:<ul><li>use the image <code>codingcorp-docker.pkg.coding.net/nocalhost/dev-images/golang:1.16</code> to start the development container</li><li>After entering development mode, Nocalhost will open the terminal and start the <code>/bin/sh</code> by default (as <a href="/docs/config/config-dev#devshell"><code>dev.shell</code></a> is empty) and entering the <code>/home/nocalhost-dev</code> folder.</li></ul></li><li>There is no <code>resources</code> limitation for this development container</li><li>Nocalhost will forward the <code>8080</code> port of the development container to the local computer&#x27;s <code>8080</code> port</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="step-2-start-development-mode"></a>Step 2. Start development mode<a class="hash-link" href="#step-2-start-development-mode" title="Direct link to heading">#</a></h3><ol><li>Right-click the deployment <code>apisix-ingress-controller</code> in cluster inspector, select <strong><code>Start DevMode</code></strong></li><li>Choose your source code directory if you have already cloned in local, or let Nocalhost clone the source code for you by entering the <strong>apache/apisix-ingress-controller</strong> <a href="https://github.com/apache/apisix-ingress-controller.git" target="_blank" rel="noopener noreferrer">repository URL</a></li><li>Wait for the operations, Nocalhost will open the remote terminal within IDE after entering DevMode</li></ol><p>Now start the <code>apisix-ingress-controller</code> process by entering the following command in the remote terminal:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">go run main.go ingress --config-path conf/config-default.yaml</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>After the <code>apisix-ingress-controller</code> has started, access the service by visiting <a href="http://127.0.0.1:8080/healthz" target="_blank" rel="noopener noreferrer"><code>http://127.0.0.1:8080/healthz</code></a> on local and check the result.</p><figure class="img-frame"><img class="gif-img" src="/img/blog/apisix/apisix-ingress-devmode.gif"><figcaption>Entering DevMode</figcaption></figure><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="step-3-change-code-and-check-result"></a>Step 3. Change code and check result<a class="hash-link" href="#step-3-change-code-and-check-result" title="Direct link to heading">#</a></h3><p>Now I will make some code changes and check the result. </p><ol><li>Stop the <code>apisix-ingress-controller</code> process</li><li>Search <code>healthz</code> and find the <code>router.go</code> file. Change the <code>healthzResponse</code> status code from <code>ok</code> to <code>Hello Nocalhost</code></li><li>Start the process again and check the change result in local</li></ol><figure class="img-frame"><img class="gif-img" src="/img/blog/apisix/apisix-ingress-code-change.gif"><figcaption>⭐️   No need to rebuild image or restart container, see result under seconds   ⭐️ </figcaption></figure><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="step-4-end-development-mode"></a>Step 4. End development mode<a class="hash-link" href="#step-4-end-development-mode" title="Direct link to heading">#</a></h3><p>Now close the development window and end development mode.</p><ol><li>Right-click the <code>apisix-ingress-controller</code> in the cluster inspector</li><li>Select <strong><code>End DevMode</code></strong></li></ol><p>Nocalhost will make <code>apisix-ingress-controller</code> end development mode, and reset the <code>apisix-ingress-controller</code> Pod to its original version. Enable the port-forwarding and check the result after ending development mode.</p><figure class="img-frame"><img class="gif-img" src="/img/blog/apisix/apisix-ingress-end-devmode.gif"><figcaption>Ending DevMode</figcaption></figure><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Code Change</h5></div><div class="admonition-content"><p>All code changes in development mode will <strong>only take effect</strong> in the development container. </p><p>After exiting the development mode, Nocalhost will reset the remote container to its original state (before the code is modified). In this way, after exiting the development mode, the modification of the code will <strong>not</strong> cause any changes or impact on the original environment.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="debugging"></a>Debugging<a class="hash-link" href="#debugging" title="Direct link to heading">#</a></h2><p>Debugging an application is not easy, and debugging an application in the Kubernetes cluster is even more difficult. Nocalhost is here to help by providing the same debugging experience you&#x27;re used in the IDE when debugging in the remote Kubernetes cluster. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="step-1-add-configuration"></a>Step 1. Add Configuration<a class="hash-link" href="#step-1-add-configuration" title="Direct link to heading">#</a></h3><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>Exit DevMode</h5></div><div class="admonition-content"><p>Remember to exit the development mode before applying the new configuration. Nocalhost will use the latest configuration the next time you enter development mode.</p></div></div><p><a href="#step-1-add-nocalhost-configuration">Open the Nocalhost configuration</a> and add remote debugging configuration</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apisix</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ingress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">controller</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">serviceType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> deployment</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apisix</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ingress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">controller</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">dev</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">gitUrl</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/apache/apisix</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ingress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">controller.git</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> codingcorp</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">docker.pkg.coding.net/nocalhost/dev</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">images/golang</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1.16</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">shell</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">workDir</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /home/nocalhost</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">dev</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null important">null</span><span class="token plain"></span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">debug</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ./debug.sh</span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">debug</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">remoteDebugPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9009</span><span class="token plain"></span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">hotReload</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">portForward</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 8080</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">8080</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li><strong><code>dev.command.debug</code>:</strong> the commands that Nocalhost will run when debugging remotely. I&#x27;m using a bash shell script file <code>debug.sh</code>. </li><li><strong><code>dev.debug.remoteDebugPort</code>:</strong> the local port that Nocalhost will forward the remote debugging port data to.</li><li><strong><code>dev.hotReload</code>:</strong> when Nocalhost detects file changes, it will automatically execute the defined command in <code>debug.sh</code> without losing the state of app.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="step-2-add-debugging-commands"></a>Step 2. Add debugging commands<a class="hash-link" href="#step-2-add-debugging-commands" title="Direct link to heading">#</a></h3><p>Add the <code>debug.sh</code> file with the following shell scripts in your <strong>source code directory</strong>.</p><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">debug.sh</div><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token shebang important">#! /bin/sh</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Only add this if you are in China</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">GOPROXY</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">https://goproxy.cn</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># The debug scripts</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">dlv --headless --log --listen</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">:9009 --api-version</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> --accept-multiclient debug main.go -- ingress --config-path conf/config-default.yaml</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>The <code>Delve</code> listening port needs to be the same as <code>remoteDebugPort</code> in the configuration.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="step-3-start-remote-debugging"></a>Step 3. Start remote debugging<a class="hash-link" href="#step-3-start-remote-debugging" title="Direct link to heading">#</a></h3><p>After adding configuration and shell file, we can start remote debugging:</p><ol><li>Right-click <code>apisix-ingress-controller</code> and choose <strong><code>Remote Debug</code></strong></li><li>Nocalhost will put <code>apisix-ingress-controller</code> into development mode and start the scripts in <code>debug.sh</code> automatically</li></ol><figure class="img-frame"><img class="gif-img" src="/img/blog/apisix/apisix-ingress-remote-debug.gif"><figcaption>Start remote debugging</figcaption></figure><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="step-4-step-through-breakpoints"></a>Step 4. Step through breakpoints<a class="hash-link" href="#step-4-step-through-breakpoints" title="Direct link to heading">#</a></h3><p>Now set a breakpoint on the <code>healthz</code> function. Hover over just to the left of the line number and click on the red dot. Once it’s set, visit <a href="http://127.0.0.1:8080/healthz" target="_blank" rel="noopener noreferrer"><code>http://127.0.0.1:8080/healthz</code></a> in your local browser, GoLand should pop to the foreground. Click the play button to close the request and the progress should continue loading.</p><p>In addition, as I enable the <code>dev.hotReload</code>, so every time you make the code change, Nocalhost will automatically re-run the scripts in <code>debug.sh</code>. This is very useful when you make the code change and debug again.</p><figure class="img-frame"><img class="gif-img" src="/img/blog/apisix/apisix-ingress-break-reload.gif"><figcaption>Setting up breakpoints and run the service</figcaption></figure><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="remote-run"></a>Remote Run<a class="hash-link" href="#remote-run" title="Direct link to heading">#</a></h2><p>Not just remote debugging, Nocalhost also provides an easy way to run your Go service in the Kubernetes cluster, plus hot reload!</p><p>Similar to remote debugging, add the following Nocalhost configuration:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apisix</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ingress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">controller</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">serviceType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> deployment</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apisix</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ingress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">controller</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">dev</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">gitUrl</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/apache/apisix</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ingress</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">controller.git</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> codingcorp</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">docker.pkg.coding.net/nocalhost/dev</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">images/golang</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1.16</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">shell</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">workDir</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /home/nocalhost</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">dev</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token null important">null</span><span class="token plain"></span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ./run.sh</span></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">debug</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ./debug.sh</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">debug</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">remoteDebugPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9009</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">hotReload</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">portForward</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 8080</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">8080</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Exit DevMode</h5></div><div class="admonition-content"><p>Remember to exit DevMode before apply the new Nocalhost configuration.</p></div></div><p>Then add a <code>run.sh</code> file into your source folder:</p><div class="codeBlockContainer_K1bP"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">run.sh</div><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token shebang important">#! /bin/sh</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Execution Scripts</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">go run main.go ingress --config-path conf/config-default.yaml</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Now you can using the remote run feature by:</p><ol><li>Right-click <code>apisix-ingress-controller</code> in cluster inspector, choose <strong><code>Remote Run</code></strong></li><li>Nocalhost will put <code>apisix-ingress-controller</code> into development mode and start the scripts in <code>run.sh</code> automatically</li></ol><p>Now every time you make code changes, Nocalhost will automatically trigger the scripts in <code>run.sh</code>. You can now enjoy the hot reload for Go without complex configuration.</p><figure class="img-frame"><img class="gif-img" src="/img/blog/apisix/apisix-ingress-remote-run.gif"><figcaption>Remote run</figcaption></figure><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="conclusion"></a>Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">#</a></h2><p>Today, we’ve learned how to use Nocalhost to develop and debug the APISIX ingress controller in Kubernetes.  Now, instead of waiting for slow local development processes, we can iterate quickly with an instant feedback loop and a productive cloud-native development environment.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="references"></a>References<a class="hash-link" href="#references" title="Direct link to heading">#</a></h2><ul><li><a href="https://apisix.apache.org/docs/ingress-controller/getting-started" target="_blank" rel="noopener noreferrer">Apache APISIX getting started guide</a></li><li><a href="https://apisix.apache.org/docs/ingress-controller/development" target="_blank" rel="noopener noreferrer">Developing for Apache APISIX Ingress Controller</a></li></ul></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/kubernetes">Kubernetes</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/apisix">APISIX</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/controller">Controller</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/development">Development</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/blog/docs-translate">Nocalhost 官方文档翻译活动</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-11-01T14:59:49.632Z" itemprop="datePublished">November 1, 2021</time> · One min read</div></header><div class="markdown" itemprop="articleBody"><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="背景"></a>背景<a class="hash-link" href="#背景" title="Direct link to heading">#</a></h2><p>Nocalhost 的新官网框架已经上线。因为目前 Nocalhost 官方文档只有英文版，这提高了学习和使用 Nocalhost 的门槛，不利于项目的传播和发展。同时翻译工作也能显著提升语言能力，帮助我们拓宽阅读技术资料的广度，故组织本次活动。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="活动流程"></a>活动流程<a class="hash-link" href="#活动流程" title="Direct link to heading">#</a></h2><p>本次活動可以通过使用 Crowdin 平台或下载源码对文档进行翻译</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="通过-crowndin-进行翻译"></a>通过 Crowndin 进行翻译<a class="hash-link" href="#通过-crowndin-进行翻译" title="Direct link to heading">#</a></h2><p>翻译项目的的地址在：<a href="https://crowdin.com/project/nocalhost" target="_blank" rel="noopener noreferrer">https://crowdin.com/project/nocalhost</a></p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>账号</h5></div><div class="admonition-content"><p>当进入项目后，需要注册一个 Crowdin 的账号，您也可以通过 GitHub 账号一键登录</p></div></div><ol><li>进入上述地址进入项目</li><li>选择需要翻译的文档，进入在线编辑器</li><li>进行在线翻译</li><li>翻译完成后退出编译器</li></ol><figure class="img-frame"><img class="gif-img" src="/img/translate/translate.gif"></figure><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="翻译要求"></a>翻译要求<a class="hash-link" href="#翻译要求" title="Direct link to heading">#</a></h3><ul><li>如果使用自动翻译，请<strong>先检查</strong>清楚自动翻译的结果，包括格式和阅读习惯</li><li>数字和英文两边是中文要加空格。</li><li>Nocalhost 和 Nocalhost Server 统一写法。</li><li>翻译完请先阅读一遍，不要出现遗漏段落，保证文章通顺、符合中文阅读习惯。不追求严格一致，可以意译。review 的时候也会检验。</li><li>你和您不要混用，统一使用用 <strong>“你”</strong>。</li><li>不会翻译的词汇可以不翻译，可以在 PR 中说明，review 的时候会查看。</li><li>注意中英文标点符号。</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="注意事项"></a>注意事项<a class="hash-link" href="#注意事项" title="Direct link to heading">#</a></h3><p>在翻译的时候，请注意原文格式和 Crowdin 生成的标签。比如下图中的 <code>&lt;0&gt;&lt;/0&gt;</code> 和 <code>&lt;1&gt;&lt;/1&gt;</code>。这些标签是 Crowdin 自动生成的，用于替换原文中的图标，特殊格式等。</p><figure class="img-frame"><img class="gif-img" src="/img/translate/label.png"><figcaption>Crowdin 标签</figcaption></figure><p>Nocalhost 官网使用了 <a href="https://docusaurus.io/" target="_blank" rel="noopener noreferrer">Docusaurus</a>，因此某些特殊符号和格式请注意。</p><p>例如：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">note title</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">内容。。。。。</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">::</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>这个是 Docuasurus 的告示（Admonition）方法。在翻译时，<code>note</code> 需要翻译，后面的 <code>title</code> 需要翻译。另外，请注意格式。</p><figure class="img-frame"><img class="gif-img" src="/img/translate/admonition.png"></figure></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/documentation">documentation</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/blog/2021/07/05/jimmy">How to debug microservices in Kubernetes with proxy, sidecar or service mesh?</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-07-05T00:00:00.000Z" itemprop="datePublished">July 5, 2021</time> · 7 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/rootsongjc" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://avatars.githubusercontent.com/u/3328185?v=4" alt="Jimmy Song"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/rootsongjc" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jimmy Song</span></a></div><small class="avatar__subtitle" itemprop="description">Developer advocate at Tetrate</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><blockquote><p>This blog is originally posted on <a href="https://jimmysong.io/en/blog/how-to-debug-microservices-in-kubernetes-with-proxy-sidecar-or-service-mesh/" target="_blank" rel="noopener noreferrer">Jimmy&#x27;s Blog</a></p></blockquote><header><h1>How to debug microservices in Kubernetes with proxy, sidecar or service mesh?</h1></header><p>This article explains three patterns/tools for debugging microservices in Kubernetes and the changes brought by the introduction of Istio for debugging microservices.</p><p>Kubernetes is arguably the best environment for running microservices so far, but the experience of debugging microservices in a Kubernetes environment may not be as user-friendly. This article will show you how to debug microservices in Kubernetes, introduce common tools, and explain how the introduction of Istio impacts debugging microservices.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="debugging-microservices-is-vastly-different-from-traditional-monolithic-applications"></a>Debugging microservices is vastly different from traditional monolithic applications<a class="hash-link" href="#debugging-microservices-is-vastly-different-from-traditional-monolithic-applications" title="Direct link to heading">#</a></h2><p>The debugging of microservices has been a long-standing problem for software developers. This challenge does not exist in traditional monolithic applications because developers can leverage the debugger in IDEs to add breakpoints, modify environment variables, single-step execution, etc. for their applications, all of which provide great help in software debugging. With the popularity of Kubernetes, the debugging of microservices becomes a thorny issue, where the following issues are more complicated than the debugging of traditional monolithic applications.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="multiple-dependencies"></a>Multiple dependencies<a class="hash-link" href="#multiple-dependencies" title="Direct link to heading">#</a></h3><p>A microservice often depends on multiple other microservices, some shared volumes across multiple microservices, and authorizations based on service accounts. When debugging a microservice, how do you deploy other dependent services to quickly build a latest set of staging environments?</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="access-from-a-local-machine"></a>Access from a local machine<a class="hash-link" href="#access-from-a-local-machine" title="Direct link to heading">#</a></h3><p>When microservices are running on a developer’s local computer, there is usually no direct access to the services in a Kubernetes cluster. How can you debug microservices deployed in a Kubernetes cluster as if they were local services?</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="slow-development-loop"></a>Slow development loop<a class="hash-link" href="#slow-development-loop" title="Direct link to heading">#</a></h3><p>Usually, it takes a long process to update the code and build it into an image before pushing it to the cluster. How do you speed up the development cycle? Let’s look at the tools that address those challenges.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="tools"></a>Tools<a class="hash-link" href="#tools" title="Direct link to heading">#</a></h2><p>The main solutions for debugging microservices in Kubernetes are:</p><ul><li>Proxy: by building a VPN, deploying a proxy in the Kubernetes cluster, and adding local debug endpoints to make the services in Kubernetes directly accessible to local applications, your architecture will look like [ local service ] &lt;-&gt; [ proxy ] &lt;-&gt; [ app in Kubernetes ].</li><li>Sidecar: Inject a sidecar into the pod of the microservice to be debugged to intercept all traffic to and from the service, so that the service can be tracked and monitored, and the service can also be debugged in this sidecar.</li><li>Service Mesh: To get an overall picture of the application, inject sidecars into all microservices so that you can get a dashboard that monitors global status.</li></ul><p>Here are three typical open source projects that implement the above solutions, each of which can help you debug microservices from a different perspective. You can apply them at different stages of software development and they can be said to be complementary to each other.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="proxy--debugging-microservices-with-telepresence"></a>Proxy – debugging microservices with Telepresence<a class="hash-link" href="#proxy--debugging-microservices-with-telepresence" title="Direct link to heading">#</a></h3><p><a href="https://www.telepresence.io/" target="_blank" rel="noopener noreferrer">Telepresence</a> is essentially a local proxy that proxies data volumes, environment variables, and networks in a Kubernetes cluster locally. The following diagram shows the main usage scenarios for Telepresence.</p><figure class="img-frame"><img class="gif-img" src="/img/blog/how-to-debug-microservices/telepresence.jpeg"><figcaption>Proxy mode: Telepresence</figcaption></figure><p>Users need to manually execute the telepresence command locally, which will automatically deploy the agent to Kubernetes. Once the agent has been deployed,</p><ul><li>Local services will have complete access to other services in the Kubernetes cluster, environment variables, Secret, ConfigMap, etc.</li><li>Services in the cluster also have direct access to the locally exposed endpoints.</li></ul><p>However, this approach requires users to run multiple commands while debugging locally, and in some network environments it may not be possible to establish a VPN connection to the Kubernetes cluster.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="sidecar--debugging-microservices-with-nocalhost"></a>Sidecar – debugging microservices with Nocalhost<a class="hash-link" href="#sidecar--debugging-microservices-with-nocalhost" title="Direct link to heading">#</a></h3><p><a href="https://nocalhost.dev/" target="_blank" rel="noopener noreferrer">Nocalhost</a> is a Kubernetes-based cloud development environment. To use it, you just need to install a plugin in your IDE – VS Code to extend Kubernetes and shorten the development feedback cycle. The development environment can be isolated by creating different namespaces for different users and using ServiceAccount when binding to different user corners. Nocalhost also provides a web console and API for administrators to manage different development environments.</p><figure class="img-frame"><img class="gif-img" src="/img/blog/how-to-debug-microservices/sidecar-nocalhost.jpeg"><figcaption>Sidecar mode: Nocalhost</figcaption></figure><p>As long as you have a Kubernetes cluster and have admin rights to the cluster, you can refer to the <a href="/docs/quick-start">Nocalhost documentation</a> to quickly start trying it out. To use the Nocalhost plugin in VS Code, you need to configure the Kubernetes cluster in the plugin first.</p><ol><li>Select the Kubeconfig file you just exported or copy and paste the contents of the file directly into the configuration.</li><li>Then select the service you need to test and select the corresponding Dev Container. VS Code will automatically open a new code window.</li></ol><p>Here is an example of the <a href="https://istio.io/latest/docs/examples/bookinfo/" target="_blank" rel="noopener noreferrer">bookinfo sample</a> provided by Istio. You can open the cloned code in your local IDE and click the hammer next to the code file to enter development mode. Selecting the corresponding DevContainer and Nocalhost will automatically inject a development container sidecar into the pod and automatically enter the container in the terminal, as shown in the following figure.</p><figure class="img-frame"><img class="gif-img" src="/img/blog/how-to-debug-microservices/nocalhost-vs-code.jpeg"><figcaption>Nocalhost VS Code</figcaption></figure><p>In development mode, the code is modified locally without rebuilding the image, and the remote development environment takes effect in real time, which can greatly accelerate the development speed. At the same time, Nocalhost also provides a server for managing the development environment and user rights, as shown in the following figure.</p><figure class="img-frame"><img class="gif-img" src="/img/blog/how-to-debug-microservices/nocalhost-web-admin.jpeg"><figcaption>Nocalhost Server</figcaption></figure><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="service-mesh--debugging-microservices-with-istio"></a>Service Mesh – debugging microservices with Istio<a class="hash-link" href="#service-mesh--debugging-microservices-with-istio" title="Direct link to heading">#</a></h3><p>The above method of using proxy and sidecar can only debug one service at a time. You’ll need a mesh to get the global status of the application, such as the metrics of the service obtained, and debug the performance of the service by understanding the dependency and invocation process of the service through distributed tracing. These observability features need to be implemented by injecting sidecar uniformly for all services. And, when your services are in the process of migrating from VMs to Kubernetes, using Istio can bring VMs and Kubernetes into a single network plane (as shown below), making it easy for developers to debug and do incremental migrations.</p><figure class="img-frame"><img class="gif-img" src="/img/blog/how-to-debug-microservices/istio-service-mesh.jpeg"><figcaption>Service Mesh mode: Istio</figcaption></figure><p>Of course, these benefits do not come without a “cost.” With the introduction of Istio, your Kubernetes services will need to adhere to the Istio naming convention and you’ll need to know how to debug microservices using the Istioctl command line and logging.</p><ul><li>Use the <em>istioctl analyze</em> command to debug the deployment of microservices in your cluster, and you can use YAML files to examine the deployment of resources in a namespace or across your cluster.</li><li>Use <em>istioctl proxy-config secret</em> to ensure that the secret of a pod in a service mesh is loaded correctly and is valid.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="summary"></a>Summary<a class="hash-link" href="#summary" title="Direct link to heading">#</a></h2><p>In the process of microservicing applications and migrating from virtual machines to Kubernetes, developers need to make a lot of changes in their mindset and habits. By building a VPN between local and Kubernetes via proxy, developers can easily debug services in Kubernetes as if they were local services. By injecting a sidecar into the pod, you can achieve real-time debugging and speed up the development process. Finally, the Istio service mesh truly enables global observability, and you can also use tools like <a href="https://www.tetrate.io/tetrate-service-bridge/" target="_blank" rel="noopener noreferrer">Tetrate Service Bridge</a> to manage heterogeneous platforms, helping you gradually move from monolithic applications to microservices.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/kubernetes">Kubernetes</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/cloud-native">Cloud-Native</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/microservice">Microservice</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_GeHD" itemprop="headline"><a itemprop="url" href="/blog/2021/01/01/">Redefine Cloud Native Dev Environment</a></h2><div class="blogPostData_291c margin-vert--md"><time datetime="2021-01-01T00:00:00.000Z" itemprop="datePublished">January 1, 2021</time> · 6 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_1R69"><div class="avatar margin-bottom--sm"><a href="https://github.com/lyzhang1999" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_1yU8" src="https://avatars.githubusercontent.com/u/8142348?v=4" alt="Wang Wei"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/lyzhang1999" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wang Wei</span></a></div><small class="avatar__subtitle" itemprop="description">Nocalhost Core Team</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="preface"></a>Preface<a class="hash-link" href="#preface" title="Direct link to heading">#</a></h2><p>With the rapid development of business, the organizational structure of the technical department has been continuously expanded and adjusted horizontally and vertically. At the same time, the enterprise&#x27;s production materials: application systems, have also become larger and larger. In order to adapt the application system to the adjustment of the enterprise organizational structure and sort out the boundaries of the organizational structure for application rights and responsibilities, most organizations will choose to use the &quot;microservice&quot; architecture to split the application system horizontally, so that the maintenance boundary of the application system is adapted The power and responsibility boundary of the organizational structure.</p><p>Generally speaking, the larger the organizational structure, the more detailed the application system will be, and the number of &quot;microservices&quot; will also increase. In the practice of splitting &quot;microservices&quot;, it is easy to mark the authority and responsibility boundaries of the organizational structure into the splitting granularity of &quot;microservices&quot;, which may lead to too fine granularity of &quot;microservices&quot;. The problem of further sharp increase in number. In the end, the calling relationship between &quot;microservices&quot; is like cross-departmental collaboration, and it has become more and more complex. The problem is particularly prominent when you want to add new requirements.</p><p>While &quot;microservices&quot; bring convenience, it also brings additional challenges for developers: how to quickly start a complete development environment? The development requirements depend on how other colleagues can coordinate and debug? How to quickly debug these microservices?</p><p>For managers, it also brings a series of challenges: how to manage the development environment of developers? How to let new colleagues quickly develop?</p><p>Imagine what difficulties would you encounter when developing a cloud-native application consisting of 200 &quot;microservices&quot;?</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="localhost-era"></a>Localhost era<a class="hash-link" href="#localhost-era" title="Direct link to heading">#</a></h2><p>In the era of monolithic applications, it is extremely friendly to developers. Developers use the local machine to run the application, modify the code to take effect in real time, and visit Localhost through a browser to view the code effect in real time.</p><figure class="img-frame"><img class="gif-img" src="/img/blog/2021-01-01/local.png"></figure><p>Monolithic applications are different from &quot;microservices&quot; applications. Monolithic applications are organized as &quot;ALL-IN-ONE&quot;. All calling relationships are limited to their own classes and functions, and the hardware requirements of applications are generally not too high.</p><p>The development of &quot;microservice&quot; applications is quite different. Due to the mutual dependence, when a certain function or microservice needs to be developed, all dependent services have to be activated. With the increase in the number of microservices, more and more local resources are needed to develop applications, which ultimately leads to the local inability to meet the configuration requirements of development.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="cloud-native-liberates-deployment-and-operation-what-about-development"></a>Cloud Native liberates deployment and operation, What about development?<a class="hash-link" href="#cloud-native-liberates-deployment-and-operation-what-about-development" title="Direct link to heading">#</a></h2><p>The popularity of cloud native and Kubernetes further shields the complexity of &quot;microservice&quot; applications, which is mainly reflected in the deployment and operation and maintenance stages.</p><p>In order to solve the problem of environmental consistency in the development, testing, and production stages of microservice applications, modern microservice application development will package each component into a Docker image and deploy it in the form of workload. Using continuous integration and continuous deployment in the DevOps pipeline, combined with Kubernetes probes, HPA, and application self-healing capabilities, completely liberated the deployment and operation and maintenance of microservice applications.</p><p>But we overlooked a key node: the development phase.</p><p>After microservice applications are packaged with Kubernetes workloads, the problem of rapid application startup in the development process is solved. Developers only need to install a single-node Kubernetes cluster locally, such as Minikube, Kind, etc., to quickly start microservice applications.</p><p>But for developers, the original monolithic application development experience no longer exists. Since the application is difficult to run outside of the Docker container, each code modification needs to go through the following steps:</p><ul><li>Execute docker build to build the image</li><li>Execute docker tag to tag the image</li><li>Execute docker push to push the image to the warehouse</li><li>Modify the image version of the Kubernetes workload</li><li>Wait for the mirror pull to end</li><li>Wait for the Pod to rebuild</li><li>View the modified code effect</li></ul><p>This directly slows down the cyclic feedback process of development, and each modification requires several minutes or even ten minutes of waiting time.</p><figure class="img-frame"><img class="gif-img" src="/img/blog/2021-01-01/circle-en.png"></figure><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="redefine-cloud-native-dev-environment"></a>Redefine Cloud Native Dev Environment<a class="hash-link" href="#redefine-cloud-native-dev-environment" title="Direct link to heading">#</a></h2><blockquote><p>Nocalhost is a Cloud Native development environment, hoping to make developing cloud-native applications as primitive and simple as developing a single application.</p></blockquote><p>Nocalhost reorganized the roles and resources involved in the development process:</p><ul><li>Team manager</li><li>Developer</li><li>Application</li><li>Cluster</li><li>Development Space</li></ul><p>Through the reintegration of these roles and resources, Nocalhost redefines the cloud-native development environment and brings a new cloud-native development experience.</p><p>In order to quickly understand the cloud-native development environment redefined by Nocalhost, let us first stand in different roles and see what Nocalhost can bring to them.</p><p>Developer:</p><ul><li>Get rid of the need to rebuild a new image for each modification and long-term loop feedback, and the modified code will take effect immediately.</li><li>One-click deployment of the development environment, get rid of the limitations of local environment construction and insufficient resources.</li><li>Link between local IDE editor and development environment, support remote debugging.</li><li>Graphical IDE plug-in, no need to be familiar with kubectl commands to complete development in cloud native environment.</li></ul><p>Manager:</p><ul><li>Unified management of microservice application packages, reducing application maintenance costs.</li><li>Unified management of the development environment and cluster, improve the utilization of cluster resources, and have isolation characteristics.</li><li>Quickly allocate development environment for new employees, and application development can be carried out immediately after the allocation of the environment.</li><li>Flexible development environment resources can be destroyed when used up, reducing development costs.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="quick-start"></a>Quick Start<a class="hash-link" href="#quick-start" title="Direct link to heading">#</a></h2><p><a href="/docs/quick-start">Try to use Nocalhost for the easier and faster cloud-native application development</a></p><p>Taking Nocalhost&#x27;s built-in Demo: Bookinfo as an example, the development of Productpage microservices has become the following simple steps:</p><ol><li>Connect to remote Kubernetes cluster by click</li><li>Select the workload that need to develop, enter development mode</li><li>Nocalhost IDE plugin will automatically sync the source code to remote <code>DevContainer</code></li><li>Change the code and see the change under seconds without rebuild image or restart remote POD.</li></ol><iframe width="100%" height="430" src="https://www.youtube.com/embed/M7i-SR531is" title="Nocalhost Quick Demo" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="landing-case"></a>Landing case<a class="hash-link" href="#landing-case" title="Direct link to heading">#</a></h2><p>Currently, Tencent Cloud <a href="http://coding.net/" target="_blank" rel="noopener noreferrer">CODING DevOps</a> (nearly 200 microservices) is using Nocalhost for development. Practice has verified that Nocalhost can greatly improve development efficiency and shorten feedback loops.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="open-source-and-community-co-construction"></a>Open source and community co-construction<a class="hash-link" href="#open-source-and-community-co-construction" title="Direct link to heading">#</a></h2><p>Nocalhost is currently fully open source and has entered CNCF Landscape: <a href="https://landscape.cncf.io/" target="_blank" rel="noopener noreferrer">https://landscape.cncf.io/</a></p><p><a href="https://github.com/nocalhost/nocalhost" target="_blank" rel="noopener noreferrer">Our Github Repo</a>.</p><p>We are using Apache-2.0 open source agreement, can use unlimited free.</p><p>For more information about Nocalhost, please visit our <a href="/docs/introduction">documentations</a>.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/kubernetes">Kubernetes</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/cloud-native">Cloud-Native</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></main></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/quick-start">Quickstart</a></li><li class="footer__item"><a href="https://github.com/nocalhost/nocalhost" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Repository</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/introduction">Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://nocalhost.slack.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/nocalhost" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.linkedin.com/in/nocalhost/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Linkedin<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 Nocalhost | Initiated by <a href="https://coding.net/" target="_blank">Coding.net</a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.bd545d41.js"></script>
<script src="/assets/js/main.45631e64.js"></script>
</body>
</html>