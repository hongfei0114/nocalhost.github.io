"use strict";(self.webpackChunknh_docs=self.webpackChunknh_docs||[]).push([[9545],{3905:function(e,t,r){r.d(t,{Zo:function(){return s},kt:function(){return f}});var n=r(67294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=n.createContext({}),u=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},s=function(e){var t=u(e.components);return n.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),d=u(r),f=a,v=d["".concat(l,".").concat(f)]||d[f]||p[f]||o;return r?n.createElement(v,i(i({ref:t},s),{},{components:r})):n.createElement(v,i({ref:t},s))}));function f(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=d;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:a,i[1]=c;for(var u=2;u<o;u++)i[u]=r[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},13919:function(e,t,r){function n(e){return!0===/^(\w*:|\/\/)/.test(e)}function a(e){return void 0!==e&&!n(e)}r.d(t,{b:function(){return n},Z:function(){return a}})},44996:function(e,t,r){r.d(t,{C:function(){return o},Z:function(){return i}});var n=r(52263),a=r(13919);function o(){var e=(0,n.Z)().siteConfig,t=(e=void 0===e?{}:e).baseUrl,r=void 0===t?"/":t,o=e.url;return{withBaseUrl:function(e,t){return function(e,t,r,n){var o=void 0===n?{}:n,i=o.forcePrependBaseUrl,c=void 0!==i&&i,l=o.absolute,u=void 0!==l&&l;if(!r)return r;if(r.startsWith("#"))return r;if((0,a.b)(r))return r;if(c)return t+r;var s=r.startsWith(t)?r:t+r.replace(/^\//,"");return u?e+s:s}(o,r,e,t)}}}function i(e,t){return void 0===t&&(t={}),(0,o().withBaseUrl)(e,t)}},58215:function(e,t,r){var n=r(67294);t.Z=function(e){var t=e.children,r=e.hidden,a=e.className;return n.createElement("div",{role:"tabpanel",hidden:r,className:a},t)}},41395:function(e,t,r){r.d(t,{Z:function(){return s}});var n=r(67294),a=r(80944),o=r(86010),i="tabItem_1uMI",c="tabItemActive_2DSg";var l=37,u=39;var s=function(e){var t=e.lazy,r=e.block,s=e.defaultValue,p=e.values,d=e.groupId,f=e.className,v=(0,a.Z)(),m=v.tabGroupChoices,h=v.setTabGroupChoices,g=(0,n.useState)(s),b=g[0],k=g[1],w=n.Children.toArray(e.children),y=[];if(null!=d){var N=m[d];null!=N&&N!==b&&p.some((function(e){return e.value===N}))&&k(N)}var O=function(e){var t=e.currentTarget,r=y.indexOf(t),n=p[r].value;k(n),null!=d&&(h(d,n),setTimeout((function(){var e,r,n,a,o,i,l,u;(e=t.getBoundingClientRect(),r=e.top,n=e.left,a=e.bottom,o=e.right,i=window,l=i.innerHeight,u=i.innerWidth,r>=0&&o<=u&&a<=l&&n>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(c),setTimeout((function(){return t.classList.remove(c)}),2e3))}),150))},Z=function(e){var t,r;switch(e.keyCode){case u:var n=y.indexOf(e.target)+1;r=y[n]||y[0];break;case l:var a=y.indexOf(e.target)-1;r=y[a]||y[y.length-1]}null==(t=r)||t.focus()};return n.createElement("div",{className:"tabs-container"},n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":r},f)},p.map((function(e){var t=e.value,r=e.label;return n.createElement("li",{role:"tab",tabIndex:b===t?0:-1,"aria-selected":b===t,className:(0,o.Z)("tabs__item",i,{"tabs__item--active":b===t}),key:t,ref:function(e){return y.push(e)},onKeyDown:Z,onFocus:O,onClick:O},r)}))),t?(0,n.cloneElement)(w.filter((function(e){return e.props.value===b}))[0],{className:"margin-vert--md"}):n.createElement("div",{className:"margin-vert--md"},w.map((function(e,t){return(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==b})}))))}},79443:function(e,t,r){var n=(0,r(67294).createContext)(void 0);t.Z=n},80944:function(e,t,r){var n=r(67294),a=r(79443);t.Z=function(){var e=(0,n.useContext)(a.Z);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},35410:function(e,t,r){r.r(t),r.d(t,{frontMatter:function(){return c},metadata:function(){return l},toc:function(){return u},default:function(){return p}});var n=r(22122),a=r(19756),o=(r(67294),r(3905)),i=(r(41395),r(58215),r(44996),["components"]),c={title:"VPN replace"},l={unversionedId:"guides/develop-service-vpn",id:"guides/develop-service-vpn",isDocsHomePage:!1,title:"VPN replace",description:"VPN replace mode",source:"@site/docs/guides/develop-service-vpn.md",sourceDirName:"guides",slug:"/guides/develop-service-vpn",permalink:"/docs/guides/develop-service-vpn",editUrl:"https://github.com/nocalhost/nocalhost.github.io/tree/main/docs/guides/develop-service-vpn.md",version:"current",lastUpdatedBy:"p_caiwfeng",lastUpdatedAt:1642058196,formattedLastUpdatedAt:"1/13/2022",frontMatter:{title:"VPN replace"},sidebar:"docs",previous:{title:"DevMode(Duplicate)",permalink:"/docs/guides/develop-service-dup-en"},next:{title:"Overview",permalink:"/docs/guides/debug/overview"}},u=[{value:"VPN replace mode",id:"vpn-replace-mode",children:[]},{value:"Feature",id:"feature",children:[]},{value:"Architecture",id:"architecture",children:[]},{value:"How to use it",id:"how-to-use-it",children:[]}],s={toc:u};function p(e){var t=e.components,c=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,n.Z)({},s,c,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h3",{id:"vpn-replace-mode"},"VPN replace mode"),(0,o.kt)("p",null,"Nocalhost support VPN now, so we have another different develop mode called VPN replace mode. in this mode, nocalhost\nwill intercept all traffic which hit to service and forward it to local, at the same time, you can access remote\nkubernetes cluster network, like: you can use DNS to connect MySQL service in k8s cluster, and also you can access pod\nservice with pod ip directly."),(0,o.kt)("h3",{id:"feature"},"Feature"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"use k8s dns to access remote service on local computer."),(0,o.kt)("li",{parentName:"ul"},"intercept the special service all traffic and forward it to local service."),(0,o.kt)("li",{parentName:"ul"},"support multiple platform, like Windows\uff0cmacOS\uff0cLinux etc.")),(0,o.kt)("h3",{id:"architecture"},"Architecture"),(0,o.kt)("p",null,"like the picture below, at the same cluster and namespace"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"developer 1 intercept service 3."),(0,o.kt)("li",{parentName:"ul"},"developer 2 intercept service 4."),(0,o.kt)("li",{parentName:"ul"},"service 3 all inbound traffic will forward to developer 1 thought pod trafficManager."),(0,o.kt)("li",{parentName:"ul"},"service 4 all inbound traffic will forward to developer 2 thought pod trafficManager."),(0,o.kt)("li",{parentName:"ul"},"developer 1 can access cluster another service thought pod trafficManager."),(0,o.kt)("li",{parentName:"ul"},"developer 2 can access cluster another service thought pod trafficManager."),(0,o.kt)("li",{parentName:"ul"},"developer 1 and developer 2 can access each other with inner ip (",(0,o.kt)("strong",{parentName:"li"},"magic"),").")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"architecture",src:r(81519).Z})),(0,o.kt)("h3",{id:"how-to-use-it"},"How to use it"),(0,o.kt)("h4",{id:"open-vpn-replace-mode"},"open VPN replace mode"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"vscode",src:r(36798).Z})),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"on Windows, you will see a promote with full screen, remember chose yes")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"vscode",src:r(69826).Z})),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"on Linux/macOS, you need to input sudo password to allow nhctl to create virtual network device")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"vscode",src:r(35407).Z})),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"jetbrains",src:r(48327).Z})),(0,o.kt)("h4",{id:"demo"},"Demo"),(0,o.kt)("p",null,(0,o.kt)("img",{src:r(27871).Z})))}p.isMDXComponent=!0},86010:function(e,t,r){function n(e){var t,r,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=n(e[t]))&&(a&&(a+=" "),a+=r);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function a(){for(var e,t,r=0,a="";r<arguments.length;)(e=arguments[r++])&&(t=n(e))&&(a&&(a+=" "),a+=t);return a}r.d(t,{Z:function(){return a}})},27871:function(e,t,r){t.Z=r.p+"assets/images/vpn-replace-demo-4335fa68057d3858bfabd1a4a0c78912.gif"},36798:function(e,t,r){t.Z=r.p+"assets/images/vpn-replace-start-all-517254ec1c6064e75145c2d6cc4ea10d.png"},35407:function(e,t,r){t.Z=r.p+"assets/images/vpn-replace-sudo-password-jetbrains-c07cc7297702548f4bce84fba59bc067.png"},69826:function(e,t,r){t.Z=r.p+"assets/images/vpn-replace-sudo-password-windows-3a2c03fb21d1e5b2b61523d16e97ca43.png"},48327:function(e,t,r){t.Z=r.p+"assets/images/vpn-replace-sudo-password-d732aa05844c5e0636b622faeb065547.png"},81519:function(e,t,r){t.Z=r.p+"assets/images/vpn-replace-traffic-manager-18becb2a05c9f7de5b2fc8e5e8ec0157.png"}}]);